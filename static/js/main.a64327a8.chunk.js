(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{232:function(e,t,n){e.exports=n(473)},237:function(e,t,n){},244:function(e,t){},245:function(e,t){},246:function(e,t){},473:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"changeDirection",function(){return R}),n.d(r,"advance",function(){return F}),n.d(r,"start",function(){return U});var o={};n.r(o),n.d(o,"default",function(){return W}),n.d(o,"actions",function(){return r});var a={};n.r(a),n.d(a,"changeScreen",function(){return K});var i={};n.r(i),n.d(i,"default",function(){return J}),n.d(i,"actions",function(){return a});var s={};n.r(s),n.d(s,"setSize",function(){return Z}),n.d(s,"setSpeed",function(){return ee}),n.d(s,"z",function(){return te});var c={};n.r(c),n.d(c,"default",function(){return re}),n.d(c,"actions",function(){return s});var p,u,l=n(0),h=n.n(l),d=n(230),m=n.n(d),f=(n(237),n(15)),v=n.n(f),g=n(29),b=n(9),y=n(10),E=n(12),O=n(11),S=n(13),k=n(4),w=n(19),j=n(14),L=n(5),M=n.n(L),D=(n(244),n(136)),z=n(21),C=n(88),N={UP:[-1,0],LEFT:[0,-1],RIGHT:[0,1],DOWN:[1,0]};function T(e,t){return e[0]==t[0]&&e[1]==t[1]}function I(e,t){var n=Math.floor(t/2),r=Math.floor(e/2),o={width:e,height:t,snake:[[n,r-1],[n,r],[n,r+1]],dot:[-1,-1],direction:N.RIGHT,instructionQueue:[],isGameOver:!1},a=x(o);return Object(z.a)({},o,{dot:a})}function P(e){var t=0==e.instructionQueue.length?e.direction:e.instructionQueue.shift();if(T(t,[0,0]))return e;var n,r,o=e.snake[e.snake.length-1],a=(r=t,[(n=o)[0]+r[0],n[1]+r[1]]),i=e.width,s=e.height,c=!function(e,t,n){var r=Object(C.a)(e,2),o=r[0],a=r[1];return 0<=o&&o<=n-1&&0<=a&&a<=t-1}(a,i,s),p=e.snake.some(function(e){return T(e,a)});if(c||p)return Object(z.a)({},e,{direction:t,isGameOver:!0});var u=[].concat(Object(D.a)(e.snake),[a]);if(!T(e.dot,a))return u.splice(0,1),Object(z.a)({},e,{snake:u,direction:t});var l=x(e);return Object(z.a)({},e,{snake:u,dot:l,direction:t})}function A(e){for(var t=e.width,n=e.height,r=new Array(n),o=0;o<r.length;o++)r[o]=new Array(t).fill(p.Empty);var a=!0,i=!1,s=void 0;try{for(var c,u=e.snake[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value,h=Object(C.a)(l,2),d=h[0],m=h[1];r[d][m]=p.Snake}}catch(b){i=!0,s=b}finally{try{a||null==u.return||u.return()}finally{if(i)throw s}}var f=Object(C.a)(e.dot,2),v=f[0],g=f[1];return-1!=v&&-1!=g&&(r[v][g]=p.Dot),r}function x(e){var t=A(e),n=[];t.forEach(function(e,t){e.forEach(function(e,r){e==p.Empty&&n.push([t,r])})});var r,o,a=(r=0,o=n.length-1,Math.floor(Math.random()*(o-r+1))+r);return n[a]}!function(e){e[e.Empty=0]="Empty",e[e.Snake=1]="Snake",e[e.Dot=2]="Dot"}(p||(p={})),function(e){e.changeDirection="game/changeDirection",e.advance="game/advance",e.start="game/start"}(u||(u={}));var G=u;var H,B=function(e,t){return void 0===t?{type:e}:{type:e,payload:t}},R=function(e){return B(G.changeDirection,{direction:e})},F=function(){return B(G.advance)},U=function(e){return B(G.start,{width:e,height:e})},X=(n(245),I(15,15)),W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.changeDirection:return function(e,t){var n=0==e.instructionQueue.length?e.direction:e.instructionQueue[e.instructionQueue.length-1];if(T(n,t))return e;if(n==N.LEFT&&t==N.RIGHT)return e;if(n==N.RIGHT&&t==N.LEFT)return e;if(n==N.UP&&t==N.DOWN)return e;if(n==N.DOWN&&t==N.UP)return e;var r=[].concat(Object(D.a)(e.instructionQueue),[t]);return Object(z.a)({},e,{instructionQueue:r})}(e,t.payload.direction);case G.advance:return P(e);case G.start:return I(t.payload.width,t.payload.height);default:return e}};(H||(H={})).changeScreen="changeScreen";var _,Y,V=H,K=function(e){return B(V.changeScreen,{screen:e})};(Y=_||(_={}))[Y.MainMenu=0]="MainMenu",Y[Y.HighScores=1]="HighScores",Y[Y.Game=2]="Game",Y[Y.Instructions=3]="Instructions",Y[Y.LogIn=4]="LogIn";var Q,q={currentScreen:_.MainMenu},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V.changeScreen:return Object(z.a)({},e,{currentScreen:t.payload.screen});default:return e}};!function(e){e.setSize="options/setSize",e.setSpeed="options/setSpeed",e.z="z"}(Q||(Q={}));var $=Q,Z=function(e){return B($.setSize,{size:e})},ee=function(e){return B($.setSpeed,{speed:e})},te=function(){return B($.z)},ne=(n(246),{size:15,speed:5}),re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $.setSize:return Object(z.a)({},e,{size:t.payload.size});case $.setSpeed:return Object(z.a)({},e,{speed:t.payload.speed});default:return e}},oe=n(135),ae=n.n(oe),ie=(n(143),n(144),n(25));ae.a.initializeApp({apiKey:"AIzaSyBLWR-a_1xOo7JqhdAFXuazo1V7-nYAHaU",authDomain:"snake-game-2103.firebaseapp.com",databaseURL:"https://snake-game-2103.firebaseio.com",projectId:"snake-game-2103",storageBucket:"snake-game-2103.appspot.com",messagingSenderId:"319555104363"});var se,ce,pe,ue,le,he,de,me=j.b({firebase:ie.firebaseReducer,game:W,ui:J,options:re}),fe=j.d(me,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),ve={firebase:ae.a,config:{userProfile:"users"},dispatch:fe.dispatch},ge=fe,be=(se=function(e){function t(){var e,n;Object(b.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(E.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(o)))).state={index:0},n.timer=void 0,n}return Object(S.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.timer=setInterval(this.next,100)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"next",value:function(){var e=(this.state.index+1)%6;this.setState({index:e})}},{key:"render",value:function(){return l.createElement("div",{className:"full-screen-loading"},l.createElement("span",null,"Please wait"),0==this.state.index&&l.createElement("span",null,"."),1==this.state.index&&l.createElement("span",null,".."),2==this.state.index&&l.createElement("span",null,"..."))}}]),t}(l.Component),Object(k.a)(se.prototype,"next",[M.a],Object.getOwnPropertyDescriptor(se.prototype,"next"),se.prototype),se),ye=(ce=function(e){function t(){return Object(b.a)(this,t),Object(E.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return l.createElement(l.Fragment,null,this.props.isLoading&&l.createElement(be,null),l.createElement("div",{className:"options"},l.createElement("button",{onClick:this.facebook},"Facebook"),l.createElement("button",{onClick:this.google},"Google")),l.createElement("div",{className:"actions"},l.createElement("button",{onClick:this.props.onBack},"Back")))}},{key:"facebook",value:function(){var e=Object(g.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.onFacebook();case 2:this.props.onBack();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"google",value:function(){var e=Object(g.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.onGoogle();case 2:this.props.onBack();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(l.Component),Object(k.a)(ce.prototype,"facebook",[M.a],Object.getOwnPropertyDescriptor(ce.prototype,"facebook"),ce.prototype),Object(k.a)(ce.prototype,"google",[M.a],Object.getOwnPropertyDescriptor(ce.prototype,"google"),ce.prototype),ce),Ee=function(e){var t=["modal"];null!=e.className&&t.push(e.className);var n=t.join(" ");return l.createElement("div",{className:"modal-wrapper"},l.createElement("div",{className:n},e.children))},Oe=(pe=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(E.a)(this,Object(O.a)(t).call(this,e))).state={isLogInOpen:!1},n.buttonRef=l.createRef(),n}return Object(S.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.focusButton(),this.props.score>=5&&this.props.profile.isLoaded&&!this.props.profile.isEmpty&&this.saveScore()}},{key:"render",value:function(){var e=this.props,t=e.score,n=e.again,r=e.back,o=this.props.profile.isLoaded?this.props.profile.isEmpty?null:this.props.profile:null,a=this.state.isLogInOpen?"log-in":"game-over",i=t<5,s=t>=5&&null==o,c=t>=5&&null!=o,p=[l.createElement("h1",{key:"game-over"},"Game over!"),l.createElement("p",{key:"score",className:"score"},"Score: ",t)],u=[l.createElement("button",{key:"main-menu",onClick:r},"Main menu"),l.createElement("button",{key:"again",ref:this.buttonRef,onClick:n},"Again?")];return i&&p.push(l.createElement("p",{key:"low-score"},"Score 5 or more for hi-score.")),s&&(p.push(l.createElement("p",{key:"log-in-to-save"},"Log in to save score.")),u.unshift(l.createElement("button",{key:"log-in-button",onClick:this.openLogInScreen},"Log in"))),c&&p.push(l.createElement("p",{key:"entered-hi-score"},"Entered hi-score list!")),l.createElement(l.Fragment,null,l.createElement(Ee,{className:a},this.state.isLogInOpen&&l.createElement(ye,{onFacebook:this.props.facebook,onGoogle:this.props.google,onBack:this.closeLogInScreen}),!this.state.isLogInOpen&&l.createElement(l.Fragment,null,l.createElement("div",{className:"text"},p),l.createElement("div",{className:"actions"},u))))}},{key:"focusButton",value:function(){var e=this.buttonRef.current;null!=e&&e.focus()}},{key:"openLogInScreen",value:function(){this.setState({isLogInOpen:!0})}},{key:"closeLogInScreen",value:function(){this.setState({isLogInOpen:!1}),this.props.profile.isLoaded&&!this.props.profile.isEmpty&&this.saveScore()}},{key:"saveScore",value:function(){this.props.saveScore()}}]),t}(l.Component),Object(k.a)(pe.prototype,"openLogInScreen",[M.a],Object.getOwnPropertyDescriptor(pe.prototype,"openLogInScreen"),pe.prototype),Object(k.a)(pe.prototype,"closeLogInScreen",[M.a],Object.getOwnPropertyDescriptor(pe.prototype,"closeLogInScreen"),pe.prototype),Object(k.a)(pe.prototype,"saveScore",[M.a],Object.getOwnPropertyDescriptor(pe.prototype,"saveScore"),pe.prototype),pe),Se=function(e){var t=e.score;return l.createElement("dl",{className:"score-bar"},l.createElement("dt",null,"Score"),l.createElement("dd",null,t))},ke=(ue=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(E.a)(this,Object(O.a)(t).call(this,e))).interval=void 0,n.score=-1,n.onKeyDown=function(e){var t=!0;switch(e.code){case"ArrowUp":case"KeyW":n.pressUp();break;case"ArrowDown":case"KeyS":n.pressDown();break;case"ArrowLeft":case"KeyA":n.pressLeft();break;case"ArrowRight":case"KeyD":n.pressRight();break;default:t=!1}t&&(e.preventDefault(),e.stopPropagation())},n.pressUp=function(){return n.props.changeDirection(N.UP)},n.pressDown=function(){return n.props.changeDirection(N.DOWN)},n.pressLeft=function(){return n.props.changeDirection(N.LEFT)},n.pressRight=function(){return n.props.changeDirection(N.RIGHT)},n.swipeXPrev=0,n.swipeYPrev=0,n.swipeXSpeed=0,n.swipeYSpeed=0,n.handleTouchStart=function(e){e.preventDefault();var t=e.touches.item(0);null!=t&&(n.swipeXPrev=t.pageX,n.swipeYPrev=t.pageY)},n.handleTouchMove=function(e){e.preventDefault();var t=e.touches.item(0);null!=t&&(n.swipeXSpeed=t.pageX-n.swipeXPrev,n.swipeYSpeed=t.pageY-n.swipeYPrev,n.swipeXPrev=t.pageX,n.swipeYPrev=t.pageY)},n.handleTouchEnd=function(e){e.preventDefault();(Math.abs(n.swipeXSpeed)>=10||Math.abs(n.swipeYPrev)>=10)&&(Math.abs(n.swipeXSpeed)>Math.abs(n.swipeYSpeed)?n.swipeXSpeed<0?n.pressLeft():n.pressRight():n.swipeYSpeed<0?n.pressUp():n.pressDown()),n.swipeXPrev=n.swipeYPrev=n.swipeXSpeed=n.swipeYSpeed=0},n.setCssBoardHeight(),n.setCssBoardWidth(),n.startGameLoop(),n}return Object(S.a)(t,e),Object(y.a)(t,[{key:"componentDidUpdate",value:function(e){e.size!=this.props.size&&(this.setCssBoardHeight(),this.setCssBoardWidth()),!e.isGameOver&&this.props.isGameOver&&this.endGameLoop()}},{key:"componentWillUnmount",value:function(){this.endGameLoop()}},{key:"render",value:function(){for(var e=this.props,t=e.size,n=e.matrix,r=t,o=t,a=0,i=[],s=0;s<o;s++)for(var c=0;c<r;c++){var u=s*r+c,l=n[s][c],d=["cell"];l==p.Snake&&(a++,d.push("snake")),l==p.Dot&&d.push("dot"),i.push(h.a.createElement("div",{key:u,className:d.join(" ")}))}return this.score=a-3,h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"game"},h.a.createElement(Se,{score:this.score}),h.a.createElement("div",{className:"board"},i)),this.props.isGameOver&&h.a.createElement(Oe,{saveScore:this.saveScore,again:this.restart,back:this.props.toMainMenu,score:this.score,profile:this.props.profile,facebook:this.props.facebook,google:this.props.google}))}},{key:"startGameLoop",value:function(){var e=450*(9-this.props.speed)/8+50;this.interval=setInterval(this.props.advance,e),document.addEventListener("keydown",this.onKeyDown),this.setUpSwipeDetection()}},{key:"endGameLoop",value:function(){clearInterval(this.interval),document.removeEventListener("keydown",this.onKeyDown),this.stripDownSwipeDetection()}},{key:"saveScore",value:function(){var e=Object(g.a)(v.a.mark(function e(){var t,n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.profile.isLoaded){e.next=2;break}return e.abrupt("return");case 2:if(!this.props.profile.isEmpty){e.next=4;break}return e.abrupt("return");case 4:if(t=this.props.auth.uid,n=this.props.auth.displayName,null!=t){e.next=8;break}return e.abrupt("return");case 8:return r={speed:this.props.speed,size:this.props.size,score:this.score,user:t,userDisplayName:n},e.next=11,this.props.firebase.push("gameScores",r);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"restart",value:function(){this.props.restart(this.props.size),this.startGameLoop()}},{key:"setCssBoardWidth",value:function(){var e=this.props.size;document.documentElement.style.setProperty("--board-width",e.toString())}},{key:"setCssBoardHeight",value:function(){var e=this.props.size;document.documentElement.style.setProperty("--board-height",e.toString())}},{key:"setUpSwipeDetection",value:function(){document.addEventListener("touchstart",this.handleTouchStart,!1),document.addEventListener("touchmove",this.handleTouchMove,!1),document.addEventListener("touchend",this.handleTouchEnd,!1),document.body.style.touchAction="none"}},{key:"stripDownSwipeDetection",value:function(){document.removeEventListener("touchstart",this.handleTouchStart),document.removeEventListener("touchmove",this.handleTouchMove),document.removeEventListener("touchend",this.handleTouchEnd),document.body.style.touchAction=""}}]),t}(h.a.Component),Object(k.a)(ue.prototype,"saveScore",[M.a],Object.getOwnPropertyDescriptor(ue.prototype,"saveScore"),ue.prototype),Object(k.a)(ue.prototype,"restart",[M.a],Object.getOwnPropertyDescriptor(ue.prototype,"restart"),ue.prototype),ue),we=Object(j.c)(ie.withFirebase,Object(w.b)(function(e,t){var n=A(e.game),r=e.firebase.profile,o=e.firebase.auth,a=e.options.speed,i=e.game,s=i.isGameOver,c=i.width;if(c!=i.height)throw new Error("Board must be square!");return{matrix:n,size:c,isGameOver:s,speed:a,profile:r,auth:o}},function(e,t){return{advance:function(){e(o.actions.advance())},changeDirection:function(t){e(o.actions.changeDirection(t))},restart:function(t){e(o.actions.start(t))},toMainMenu:function(){e(i.actions.changeScreen(_.MainMenu))}}}))(ke),je=function(e){return e.toString()},Le=function(e){var t=e.value,n=e.valueChange,r=e.min,o=void 0===r?-1/0:r,a=e.max,i=void 0===a?1/0:a,s=e.step,c=void 0===s?1:s,p=e.format,u=void 0===p?je:p,l=t-c<o,d=t+c>i;return h.a.createElement("div",{className:"counter"},h.a.createElement("button",{className:"basic",onClick:function(){return n(t-c)},disabled:l},"<"),h.a.createElement("span",null,u(t)),h.a.createElement("button",{className:"basic",onClick:function(){return n(t+c)},disabled:d},">"))},Me=function(e){var t=e.children,n=e.actionText,r=void 0===n?"Ok":n;return l.createElement(Ee,{className:"alert"},l.createElement("p",null,t),l.createElement("button",{onClick:e.onAction},r))},De=function(e){return e.toString().padStart(2,"0")},ze=(le=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(E.a)(this,Object(O.a)(t).call(this,e))).state={isCannotViewHighScoresAlertOpen:!1},n}return Object(S.a)(t,e),Object(y.a)(t,[{key:"play",value:function(){window.__IS_MOBILE__&&document.body.requestFullscreen(),this.props.startGameFromMainMenu(this.props.size)}},{key:"loginLogoutButtonClick",value:function(){var e=Object(g.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.profile.isLoaded){e.next=2;break}return e.abrupt("return");case 2:this.props.profile.isEmpty?this.props.goToLogInScreen():this.props.firebase.logout();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e={value:this.props.speed,valueChange:this.props.changeSpeed,min:1,max:9,step:1,format:De},t={value:this.props.size,valueChange:this.props.changeSize,min:9,max:21,step:2,format:De},n=this.props.profile.isLoaded?this.props.profile.isEmpty?"Log in":"Log out":"Loading...",r=["logged-in-as"];this.props.profile.isLoaded&&!this.props.profile.isEmpty||r.push("hide");var o=this.props.profile.isLoaded&&!this.props.profile.isEmpty?this.props.profile.displayName:"";return l.createElement("div",{className:"screen main-menu"},l.createElement("div",{className:"area"},l.createElement("button",{onClick:this.play},"Play"),l.createElement("div",{className:"settings"},l.createElement("div",{className:"setting"},l.createElement("span",null,"Speed"),l.createElement(Le,e)),l.createElement("div",{className:"setting"},l.createElement("span",null,"Size"),l.createElement(Le,t)))),l.createElement("div",{className:"area horizontal"},l.createElement("button",{onClick:this.scoresClick},"Scores"),l.createElement("button",{onClick:this.props.goToInstructionsScreen},"Rules")),l.createElement("div",{className:"area"},l.createElement("button",{disabled:!this.props.profile.isLoaded,onClick:this.loginLogoutButtonClick},n),l.createElement("span",{className:r.join(" ")},"Logged in as ",o)),this.state.isCannotViewHighScoresAlertOpen&&l.createElement(Me,{onAction:this.closeCannotViewHighScoresAlert},"Guests cannot view scores. You must log in."))}},{key:"scoresClick",value:function(){!this.props.profile.isLoaded||this.props.profile.isEmpty?this.openCannotViewHighScoresAlert():this.props.goToHighScoresScreen()}},{key:"openCannotViewHighScoresAlert",value:function(){this.setState({isCannotViewHighScoresAlertOpen:!0})}},{key:"closeCannotViewHighScoresAlert",value:function(){this.setState({isCannotViewHighScoresAlertOpen:!1})}}]),t}(l.Component),Object(k.a)(le.prototype,"play",[M.a],Object.getOwnPropertyDescriptor(le.prototype,"play"),le.prototype),Object(k.a)(le.prototype,"loginLogoutButtonClick",[M.a],Object.getOwnPropertyDescriptor(le.prototype,"loginLogoutButtonClick"),le.prototype),Object(k.a)(le.prototype,"scoresClick",[M.a],Object.getOwnPropertyDescriptor(le.prototype,"scoresClick"),le.prototype),Object(k.a)(le.prototype,"openCannotViewHighScoresAlert",[M.a],Object.getOwnPropertyDescriptor(le.prototype,"openCannotViewHighScoresAlert"),le.prototype),Object(k.a)(le.prototype,"closeCannotViewHighScoresAlert",[M.a],Object.getOwnPropertyDescriptor(le.prototype,"closeCannotViewHighScoresAlert"),le.prototype),le),Ce=Object(j.c)(ie.withFirebase,Object(w.b)(function(e,t){return{speed:e.options.speed,size:e.options.size,profile:e.firebase.profile}},function(e,t){return{startGameFromMainMenu:function(t){e(o.actions.start(t)),e(i.actions.changeScreen(_.Game))},goToHighScoresScreen:function(){e(i.actions.changeScreen(_.HighScores))},goToInstructionsScreen:function(){e(i.actions.changeScreen(_.Instructions))},goToLogInScreen:function(){e(i.actions.changeScreen(_.LogIn))},changeSpeed:function(t){e(c.actions.setSpeed(t))},changeSize:function(t){e(c.actions.setSize(t))}}}))(ze);!function(e){e[e.All=0]="All",e[e.Mode=1]="Mode"}(de||(de={}));var Ne,Te=(he=function(e){function t(){var e,n;Object(b.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(E.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(o)))).state={currentTab:de.All,speed:5,size:15},n}return Object(S.a)(t,e),Object(y.a)(t,[{key:"changeTabToAll",value:function(){this.setState({currentTab:de.All})}},{key:"changeTabToMode",value:function(){this.setState({currentTab:de.Mode})}},{key:"changeSpeed",value:function(e){this.setState({speed:e})}},{key:"changeSize",value:function(e){this.setState({size:e})}},{key:"render",value:function(){var e={value:this.state.speed,valueChange:this.changeSpeed,min:1,max:9,step:1,format:De},t={value:this.state.size,valueChange:this.changeSize,min:9,max:21,step:2,format:De},n=[],r=[];return this.state.currentTab==de.All&&n.push("active"),this.state.currentTab==de.Mode&&r.push("active"),l.createElement("div",{className:"screen high-scores"},l.createElement("div",{className:"nav"},l.createElement("button",{onClick:this.changeTabToAll,className:n.join(" ")},"All"),l.createElement("button",{onClick:this.changeTabToMode,className:r.join(" ")},"Mode"),l.createElement("button",{onClick:this.props.toMainMenu},"Back")),l.createElement("div",{className:"main"},l.createElement("div",{className:"title"},l.createElement("div",{className:"name"},this.state.currentTab==de.All?"All":"Mode"),this.state.currentTab==de.Mode&&l.createElement("div",{className:"options"},l.createElement("div",null,l.createElement("div",null,"Speed"),l.createElement(Le,e)),l.createElement("div",null,l.createElement("div",null,"Size"),l.createElement(Le,t)))),l.createElement("div",{className:"list"},null==this.scores?l.createElement("div",{className:"loading"},"Loading..."):this.scores.length>0?l.createElement("table",null,l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",null,"Name"),l.createElement("th",{className:"right"},"Scr"),l.createElement("th",null,"Mode"))),l.createElement("tbody",null,this.scores.map(function(e,t){return l.createElement("tr",{key:e.user+e.size+e.speed+e.score+t},l.createElement("td",null,e.userDisplayName),l.createElement("td",{className:"right"},e.score),l.createElement("td",null,e.size,"/",e.speed))}))):this.state.currentTab==de.All?l.createElement("span",null,"Apparently, nobody played the game yet..."):l.createElement("span",null,"No scores for"," ",De(this.state.speed),"/",De(this.state.size),"."))))}},{key:"scores",get:function(){var e=this,t=this.props.scores;return null==t?null:(this.state.currentTab==de.Mode?t.filter(function(t){var n=t.value;return n.size==e.state.size&&n.speed==e.state.speed}):t).map(function(e){var t=e.key,n=e.value;return Object(z.a)({key:t},n)})}}]),t}(l.Component),Object(k.a)(he.prototype,"changeTabToAll",[M.a],Object.getOwnPropertyDescriptor(he.prototype,"changeTabToAll"),he.prototype),Object(k.a)(he.prototype,"changeTabToMode",[M.a],Object.getOwnPropertyDescriptor(he.prototype,"changeTabToMode"),he.prototype),Object(k.a)(he.prototype,"changeSpeed",[M.a],Object.getOwnPropertyDescriptor(he.prototype,"changeSpeed"),he.prototype),Object(k.a)(he.prototype,"changeSize",[M.a],Object.getOwnPropertyDescriptor(he.prototype,"changeSize"),he.prototype),he),Ie=Object(ie.firebaseConnect)([{path:"gameScores",queryParams:["orderByChild=score"]}]),Pe=Object(j.c)(Ie,Object(w.b)(function(e,t){var n=e.firebase.ordered.gameScores;return null!=n&&n.reverse(),{scores:n}},function(e,t){return{toMainMenu:function(){e(i.actions.changeScreen(_.MainMenu))}}}))(Te),Ae=function(e){function t(){return Object(b.a)(this,t),Object(E.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return l.createElement("div",{className:"screen instructions"},l.createElement("div",{className:"panels"},l.createElement("div",{className:"panel"},l.createElement("h2",null,"Goal"),l.createElement("p",null,"Collect as many dots. Each dot increases your length by 1.")),l.createElement("div",{className:"panel"},l.createElement("h2",null,"Careful!"),l.createElement("p",null,"Do not bump into walls. Do not bump into yourself.")),l.createElement("div",{className:"panel"},l.createElement("h2",null,"Controls"),l.createElement("p",null,"Use arrow keys or WASD. Alternatively, swipe across the screen.")),l.createElement("div",{className:"panel"},l.createElement("h2",null,"Credits"),l.createElement("p",null,"Made by ",l.createElement("a",{href:"https://github.com/lazarljubenovic"},"@lazarljubenovic"),". Game is open source. Find it on ",l.createElement("a",{href:"https://github.com/lazarljubenovic/snake"},"GitHub"),"."))),l.createElement("div",{className:"actions"},l.createElement("button",{onClick:this.props.goToMainMenu},"Back")))}}]),t}(l.Component),xe=Object(j.c)(Object(w.b)(function(e,t){return{}},function(e,t){return{goToMainMenu:function(){e(i.actions.changeScreen(_.MainMenu))}}}))(Ae),Ge=function(e){var t=["screen"];null!=e.className&&t.push(e.className);var n=t.join(" ");return l.createElement("div",{className:n},e.children)},He=function(e){function t(){return Object(b.a)(this,t),Object(E.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return l.createElement(Ge,{className:"log-in"},l.createElement(ye,{isLoading:!this.props.profile.isLoaded,onFacebook:this.props.onFacebook,onGoogle:this.props.onGoogle,onBack:this.props.back}))}}]),t}(l.Component),Be=Object(j.c)(Object(w.b)(function(e,t){return{profile:e.firebase.profile}},function(e,t){return{back:function(){e(i.actions.changeScreen(_.MainMenu))}}}))(He);function Re(e,t){if(e<=t[0])return t[0];for(var n=1;n<t.length;n++)if(e<t[n])return t[n-1];return t[t.length-1]}var Fe=(Ne=function(e){function t(){return Object(b.a)(this,t),Object(E.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(y.a)(t,[{key:"componentWillMount",value:function(){this.updateSizes(),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"componentWillReceiveProps",value:function(e){e.size==this.props.size&&e.speed==this.props.speed||this.updateSizes()}},{key:"render",value:function(){return l.createElement("div",null,this.props.isMainMenuScreen&&l.createElement(Ce,null),this.props.isGameScreen&&l.createElement(we,{facebook:this.facebook,google:this.google}),this.props.isHighScoresScreen&&l.createElement(Pe,null),this.props.isInstructionsScreen&&l.createElement(xe,null),this.props.isLogInScreen&&l.createElement(Be,{onFacebook:this.facebook,onGoogle:this.google}))}},{key:"facebook",value:function(){var e=Object(g.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.firebase.login({provider:"facebook",type:"popup"});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"google",value:function(){var e=Object(g.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.firebase.login({provider:"google",type:"popup"});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onResize",value:function(){this.updateSizes()}},{key:"updateSizes",value:function(){var e=window.innerWidth,t=window.innerHeight,n=[6,12,18,24,30,36],r=Re(e/(7*this.props.size/6+1),n),o=Re(t/(7*this.props.size/6+3.5),n),a=Math.min(r,o);this.setProp("board-cell-size",a+"px")}},{key:"setProp",value:function(e,t){document.documentElement.style.setProperty("--".concat(e),t)}}]),t}(l.Component),Object(k.a)(Ne.prototype,"facebook",[M.a],Object.getOwnPropertyDescriptor(Ne.prototype,"facebook"),Ne.prototype),Object(k.a)(Ne.prototype,"google",[M.a],Object.getOwnPropertyDescriptor(Ne.prototype,"google"),Ne.prototype),Object(k.a)(Ne.prototype,"onResize",[M.a],Object.getOwnPropertyDescriptor(Ne.prototype,"onResize"),Ne.prototype),Ne),Ue=Object(ie.firebaseConnect)([]),Xe=Object(j.c)(Ue,Object(w.b)(function(e,t){return{isMainMenuScreen:e.ui.currentScreen==_.MainMenu,isGameScreen:e.ui.currentScreen==_.Game,isHighScoresScreen:e.ui.currentScreen==_.HighScores,isInstructionsScreen:e.ui.currentScreen==_.Instructions,isLogInScreen:e.ui.currentScreen==_.LogIn,speed:e.options.speed,size:e.options.size}},function(e,t){return{goToMainMenu:function(){e(i.actions.changeScreen(_.MainMenu))}}}))(Fe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var We=document.getElementById("root"),_e=h.a.createElement(w.a,{store:ge},h.a.createElement(ie.ReactReduxFirebaseProvider,ve,h.a.createElement(Xe,null)));m.a.render(_e,We),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[232,1,2]]]);
//# sourceMappingURL=main.a64327a8.chunk.js.map